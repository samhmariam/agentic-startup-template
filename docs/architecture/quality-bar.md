# Enterprise Quality Bar

**Owner:** Vibe Engineer  
**RAG Collection:** `quality-bar` (indexed at high priority)

This document defines what "Enterprise Ready" means for output generated by this Agentic Pod. It is seeded into Chroma and retrieved by the Polish Agent before every polish pass.

---

## The 5% Rule

Agents handle ~95% of execution. The Vibe Engineer owns the remaining 5%:

> *Nuance, brand voice, and the "feel" that signals trust to an enterprise buyer.*

---

## Code Quality Rubric

### 1. Clarity over Cleverness
- Variable names are self-documenting (`userAuthToken`, not `t`).
- Functions do one thing and are named for that thing.
- Complex logic has a one-line comment explaining *why*, not *what*.

### 2. Error Handling
- All `async` paths have explicit error handling — no silent swallows.
- Errors surface with enough context to debug without logs (`new Error(\`Failed to fetch user ${userId}: ${cause.message}\`)`).
- Public APIs return typed result objects or throw typed errors, never `unknown`.

### 3. Type Safety
- No `any` — use `unknown` and narrow explicitly.
- All agent I/O is Zod-validated at the boundary (see `guardrails/schema-validator.ts`).
- `tsconfig.json` strict mode is always on.

### 4. Testability
- Pure functions where possible.
- Side effects (DB writes, API calls) are injected via parameters or constructor, not imported as singletons.
- Every new module gets at least one unit test and one agentic integration test.

---

## UX / API Design Rubric

### 1. Principle of Least Surprise
- Function signatures match their names. `getUser()` returns a user or `null` — it never throws.
- Boolean flags in config are named for the *active* state (`enableRetry: true`, not `disableCache: false`).

### 2. Consistent Naming Conventions
- TypeScript: `camelCase` identifiers, `PascalCase` types/classes, `SCREAMING_SNAKE_CASE` constants.
- Files: `kebab-case.ts`.
- Zod schemas: suffix `Schema` (e.g., `TechSpecSchema`); inferred types: no suffix (e.g., `TechSpec`).

### 3. Developer Experience
- All public functions have JSDoc with at least a one-sentence description.
- Error messages include actionable guidance ("did you run `npm run seed`?").
- CLI commands print progress — no silent long-running processes.

### 4. Security by Default
- No secrets in source code — reference `process.env` and validate at startup.
- PII sanitized before entering agent context (see `guardrails/pii-filter.ts`).
- New dependencies require a comment justifying the addition.

---

## Polish Checklist

The Vibe Engineer runs through this before marking an artifact as complete:

- [ ] No `TODO` or `FIXME` in generated code
- [ ] No `console.log` left in production paths (use structured logging)
- [ ] All acceptance criteria from the `TechSpec` are demonstrably met
- [ ] Error messages are human-readable
- [ ] Variable names pass the "new hire" test — legible without context
- [ ] No raw `any` types
- [ ] JSDoc on every exported function/class
- [ ] At least one test per new module
